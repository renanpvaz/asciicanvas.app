function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequireeba0;null==i&&((i=function(t){if(t in r)return r[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){o[t]=e},n.parcelRequireeba0=i),i.register("kyEFX",(function(e,n){var r,o;t(e.exports,"register",(function(){return r}),(function(t){return r=t})),t(e.exports,"resolve",(function(){return o}),(function(t){return o=t}));var i={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)i[e[n]]=t[e[n]]},o=function(t){var e=i[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),i.register("7MNIy",(function(e,n){var r;t(e.exports,"getBundleURL",(function(){return r}),(function(t){return r=t}));var o={};function i(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=o[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return i(t[2])}return"/"}(),o[t]=e),e}})),i("kyEFX").register(JSON.parse('{"ahxzu":"index.38da8cff.js","fval4":"pencil.b9c49572.png","aeHsp":"line.cb0882d0.png","03N9M":"eraser.0db1811d.png","lKfEC":"bucket.932cfe2f.png","gRxD9":"square.9e42d342.png","6vn2u":"text.53f5d264.png","jC7mt":"selection.72bd8c91.png","6tHdr":"ellipse.540b1c5c.png"}'));var a={};t(a,"key",(function(){return s}),(function(t){return s=t})),t(a,"get",(function(){return l}),(function(t){return l=t})),t(a,"set",(function(){return f}),(function(t){return f=t})),t(a,"getNNeighbors",(function(){return d}),(function(t){return d=t}));var u,c=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r},s=function(t,e){return t+","+e},l=function(t,e,n){return n[s(t,e)]||{x:t,y:e}},f=function(t,e){var n=s(t.x,t.y);return n in e?Object.assign(e[n],t):e[n]=t,e},d=function(t,e){if(1===t)return[e];if(2===t)return c([e],function(t){var e=t.x,n=t.y;return[{x:e+1,y:n},{x:e-1,y:n},{x:e,y:n+1},{x:e,y:n-1}]}(e));for(var n=[],r=Math.sin,o=Math.acos,i=e.x-t;i<e.x+t;i++)for(var a=t*r(o((e.x-i)/t))*.5,u=e.y-a;u<e.y+a;u++)n.push({x:i,y:Math.round(u)});return n},h={name:"pencil",icon:e(u=i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("fval4")),behavior:"both",cursor:"url('"+e(u)+"') 7 35, default",sizeable:!0,onPaint:function(t){for(var e=t.x,n=t.y,r=t.canvas,o=t.state,i=0,u=(0,a.getNNeighbors)(o.size||0,{x:e,y:n});i<u.length;i++){var c=u[i];r.set(c.x,c.y)}},onPointerDown:function(){},onPointerUp:function(){}},v=function(t,e,n){return{x:Math.floor(t/n.cellWidth),y:Math.floor(e/n.cellHeight)}},p=function(t){for(var e,n="",r=0;r<t.height;r++){for(var o=0;o<t.width;o++){n+=(null===(e=t.canvas[(0,a.key)(o,r)])||void 0===e?void 0:e.value)||" "}n+="\n"}return n},y={state:"unstarted",pressing:!1,canvas:{},preview:{},cellHeight:0,cellWidth:0,char:"@",color:"#d238a8",dirtyCells:[],history:{undo:[],redo:[],updated:!1},keys:{},tool:h,$toolRef:null,size:1,fontSize:12,width:580,height:480.53125,selection:null},m={};t(m,"initCanvas",(function(){return _}),(function(t){return _=t})),t(m,"makeApi",(function(){return j}),(function(t){return j=t})),t(m,"measureText",(function(){return D}),(function(t){return D=t})),t(m,"isOutOfBounds",(function(){return U}),(function(t){return U=t})),t(m,"drawGrid",(function(){return F}),(function(t){return F=t})),t(m,"draw",(function(){return T}),(function(t){return T=t}));var g={};t(g,"html",(function(){return b}),(function(t){return b=t})),t(g,"htmlRaw",(function(){return w}),(function(t){return w=t})),t(g,"isMobile",(function(){return E}),(function(t){return E=t})),t(g,"query",(function(){return k}),(function(t){return k=t})),t(g,"makeDraggable",(function(){return P}),(function(t){return P=t}));var x=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},b=function(t,e,n){var r,o=document.createElement(t),i=e.style,a=void 0===i?{}:i,u=e.dataset,c=void 0===u?{}:u,s=x(e,["style","dataset"]);return Object.assign(o.style,a),Object.assign(o.dataset,c),Object.assign(o,s),null===(r=n)||void 0===r||r.forEach((function(t){return o.appendChild("string"==typeof t?document.createTextNode(t):t)})),o},w=function(t){return b("div",{innerHTML:t}).firstElementChild},E=function(){return window.innerWidth<767},k=function(t){return document.querySelector(".js-"+t)},P=function(t,e,n,r){var o,i,a=!1,u=n||0,c=r||0,s=n||0,l=r||0,f=function(t){return"touchmove"===t.type||"touchstart"===t.type},d=function(){var n=v(u,c,e),r=n.x,o=n.y;t.dataset.x=""+r,t.dataset.y=""+o,t.style.transform="translate3d("+r*e.cellWidth+"px, "+o*e.cellHeight+"px, 0)"},h=function(e){f(e)?(o=e.touches[0].clientX-s,i=e.touches[0].clientY-l):(o=e.clientX-s,i=e.clientY-l),e.target===t&&(a=!0)},p=function(){o=u,i=c,a=!1},y=function(t){a&&(f(t)?(u=t.touches[0].clientX-o,c=t.touches[0].clientY-i):(u=t.clientX-o,c=t.clientY-i),s=u,l=c,d())};d(),t.addEventListener("touchstart",h,!1),t.addEventListener("touchend",p,!1),document.addEventListener("touchmove",y,!1),t.addEventListener("mousedown",h,!1),t.addEventListener("mouseup",p,!1),document.addEventListener("mousemove",y,!1)},C={};t(C,"back",(function(){return M}),(function(t){return M=t})),t(C,"forward",(function(){return O}),(function(t){return O=t})),t(C,"push",(function(){return R}),(function(t){return R=t}));var N=function(){return N=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},N.apply(this,arguments)},L=function(t,e){var n=e.history[t];if(n.length){H("undo"===t?"redo":"undo",e);var r=n.pop();e.history.updated=!0,e.canvas=r||e.canvas}},H=function(t,e){e.history[t].push(N({},e.canvas)),e.history.updated=!1},M=function(t){return L("undo",t)},O=function(t){return L("redo",t)},R=function(t){t.history.redo=[],H("undo",t)},z=function(){return z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},z.apply(this,arguments)},S=function(t,e){var n=document.createElement("canvas"),r=n.getContext("2d"),o=window.devicePixelRatio||1;return n.width=t*o,n.height=e*o,n.style.width=t+"px",n.style.height=e+"px",r.scale(o,o),n},_=function(t){var e=t.state,n=t.put,r=S(e.width,e.height),o=r.getContext("2d"),i=Object.assign(e,{state:"ready",context:o}),a=function(t,e){i.tool[t](z(z({},v(e.x-r.offsetLeft,e.y-r.offsetTop,i)),{state:i,canvas:j(i),put:n}),i.tool.state)},u=function(t){return i.tool.behavior===t||"both"===i.tool.behavior},c=function(t){i.pressing=!0,a("onPointerDown",t),C.push(i)},s=function(t){i.pressing=!1,a("onPointerUp",t),u("press")&&a("onPaint",t)},l=function(t){i.pressing&&u("drag")&&a("onPaint",t)},f=function(t){return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}};return(0,g.isMobile)()?(r.addEventListener("touchstart",(function(t){return c(f(t))})),r.addEventListener("touchend",(function(t){return s(f(t))})),r.addEventListener("touchmove",(function(t){return l(f(t))}))):(r.addEventListener("mousedown",(function(t){return c(t)})),r.addEventListener("mouseup",(function(t){return s(t)})),r.addEventListener("mousemove",(function(t){l(t),t.stopPropagation()}))),r},D=function(t){var e=document.createElement("canvas").getContext("2d");e.font=t+"px monospace";var n=e.measureText("$");return{width:n.width,height:1.5*n.actualBoundingBoxAscent}},U=function(t,e){var n=t.x,r=t.y;return n>e.width/e.cellWidth||n<0||r>e.height/e.cellHeight||r<0},j=function(t){return{get:function(e,n){return a.get(e,n,t.canvas)},set:function(e,n,r){void 0===r&&(r=t.char),a.set({x:e,y:n,color:t.color,value:r},t.canvas),t.dirtyCells.push(a.key(e,n))},setPreview:function(e,n,r){void 0===r&&(r=t.char),U({x:e,y:n},t)||a.set({value:r,color:t.color,x:e,y:n},t.preview)},clearPreview:function(){var e=t.preview;for(var n in e){var r=e[n],o=r.x,i=r.y,u=a.get(o,i,t.canvas);e[n]=u}},applyPreview:function(){var e=t.preview;for(var n in e){var r=e[n];r.value&&(t.canvas[n]=r)}t.preview={}},drawSelection:function(e,n){t.selection={start:e,end:n},t.history.updated=!0},clearSelection:function(){t.selection=null,t.history.updated=!0}}},F=function(t){var e=S(t.width,t.height),n=e.getContext("2d"),r=t.context;n.strokeStyle="#7b7b7b",n.lineWidth=.5;for(var o=0;o<t.width;o+=t.cellWidth)n.beginPath(),n.moveTo(o,0),n.lineTo(o,t.height),n.stroke();for(var i=0;i<t.height;i+=t.cellHeight)n.beginPath(),n.moveTo(0,i),n.lineTo(t.width,i),n.stroke();r.canvas.style.backgroundImage="url('"+e.toDataURL()+"')"},T=function(t){var e=t.context;e.textBaseline="top",e.font=t.fontSize+"px monospace";var n=function(n){n.value&&(e.fillStyle=n.color,e.fillText(n.value,n.x*t.cellWidth,n.y*t.cellHeight))},r=function(n){n&&e.clearRect(n.x*t.cellWidth,n.y*t.cellHeight,t.cellWidth,t.cellHeight)};if(t.history.updated){if(e.clearRect(0,0,e.canvas.width,e.canvas.height),t.selection){var o=t.selection,i=function(e,n){var r=e.x*t.cellWidth,o=e.y*t.cellHeight;return{x:r,y:o,width:n.x*t.cellWidth-r,height:n.y*t.cellHeight-o}}(o.start,o.end);e.setLineDash([5,3]),e.strokeStyle="#03a9f4",e.lineWidth=2,e.strokeRect(i.x,i.y,i.width,i.height)}for(var a in t.canvas){n(s=t.canvas[a])}}else{for(var a in t.preview){r(s=t.preview[a]),n(s)}for(var u=0,c=t.dirtyCells;u<c.length;u++){var s;a=c[u];r(s=t.canvas[a]),n(s)}t.dirtyCells=[]}},A={};t(A,"renderToolbar",(function(){return bt}),(function(t){return bt=t}));var W;W=i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("aeHsp");var B,X={name:"line",icon:e(W),behavior:"drag",cursor:"crosshair",onPointerDown:function(t){var e=t.x,n=t.y;this.start={x:e,y:n}},onPointerUp:function(t){t.canvas.applyPreview()},onPaint:function(t){var e=t.x,n=t.y,r=t.canvas,o={x:e,y:n};this.start&&(r.clearPreview(),function(t,e){for(var n=e.x-t.x,r=e.y-t.y,o=Math.abs(n),i=Math.abs(r),a=n>0?1:-1,u=r>0?1:-1,c={x:t.x,y:t.y},s=[{x:c.x,y:c.y}],l=0,f=0;l<o||f<i;)(.5+l)/o==(.5+f)/i?(c.x+=a,c.y+=u,l++,f++):(.5+l)/o<(.5+f)/i?(c.x+=a,l++):(c.y+=u,f++),s.push({x:c.x,y:c.y});return s}(this.start,o).forEach((function(t){return r.setPreview(t.x,t.y)})))}},I={name:"eraser",icon:e(i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("03N9M")),behavior:"both",onPaint:function(t){for(var e=t.x,n=t.y,r=t.canvas,o=t.state,i=0,u=(0,a.getNNeighbors)(o.size||0,{x:e,y:n});i<u.length;i++){var c=u[i];r.set(c.x,c.y,"")}},onPointerDown:function(){},onPointerUp:function(){}},q={name:"fill",icon:e(B=i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("lKfEC")),behavior:"press",cursor:"url('"+e(B)+"'), default",onPaint:function(t){var e=t.x,n=t.y,r=t.state,o=t.canvas,i=o.get(e,n);if(i)for(var a=[i],u=i.color;a.length;){var c=a.pop();if(!(0,m.isOutOfBounds)(c,r)&&c.color===u){var s=c.x,l=c.y;o.set(s,l),a.push(o.get(s+1,l)),a.push(o.get(s-1,l)),a.push(o.get(s,l+1)),a.push(o.get(s,l-1))}}},onPointerDown:function(){},onPointerUp:function(){}},K={};t(K,"Rectangle",(function(){return J}),(function(t){return J=t}));var Y;Y=i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("gRxD9");var $,G=function(){return G=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},G.apply(this,arguments)},J={name:"rectangle",icon:e(Y),behavior:"drag",cursor:"crosshair",onPointerDown:function(t){var e=t.x,n=t.y,r=t.canvas;this.start={x:e,y:n},r.setPreview(e,n)},onPointerUp:function(t){t.canvas.applyPreview()},onPaint:function(t){var e=t.x,n=t.y,r=t.canvas,o={x:e,y:n};r.clearPreview();for(var i=0,a=function(t,e){var n=[t,e],r=function(r,o){for(var i,a,u=!1,c=t[r]<e[r]?1:-1,s=t[o]<e[o]?-1:1,l=t,f=e;!u;){var d=l[r]===f[r],h=l[o]===f[o];d||n.push(l=G(G({},l),((i={})[r]=l[r]+c,i))),h||n.push(f=G(G({},f),((a={})[o]=f[o]+s,a))),u=d&&h}};return r("x","y"),r("y","x"),n}(this.start,o);i<a.length;i++){var u=a[i];r.setPreview(u.x,u.y)}}};$=i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("6vn2u");var Q,V=function(t){var e=t.x,n=t.y,r=t.text,o=void 0===r?"":r,i=t.editable,a=void 0===i||i,u=t.draggable,c=void 0!==u&&u;return function(t){var r=t.state,i=t.canvas,u=(0,g.html)("pre",{id:"text-edit",className:"selection",contentEditable:a?"true":"false",style:{transform:"translate("+e*r.cellWidth+"px, "+n*r.cellHeight+"px)",fontSize:r.fontSize+"px",lineHeight:r.cellHeight+1+"px",color:r.color},textContent:o}),s=function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),f())},l=function(t){t.target!==u&&f()},f=function(){document.body.removeChild(u),(u.textContent||"").split("\n").forEach((function(t,r){t.split("").forEach((function(t,o){var a=+(u.dataset.x||e),c=+(u.dataset.y||n);i.set(a+o,c+r,t)}))})),document.removeEventListener("keyup",s),document.removeEventListener("mousedown",l)};document.addEventListener("keyup",s),document.addEventListener("mousedown",l),c&&(0,g.makeDraggable)(u,r,e*r.cellWidth,n*r.cellHeight),document.body.appendChild(u),u.focus()}},Z=function(t){return function(e){var n=e.state,r="img"===t?"png":"txt",o="img"===t?n.context.canvas.toDataURL("image/png"):"data:text;charset=utf-8,"+encodeURIComponent(p(n)),i=(0,g.html)("a",{href:o,download:"untitled."+r,style:{display:"none"}});document.body.appendChild(i),i.click(),document.body.removeChild(i)}},tt=function(t){return function(e){var n=e.put,r=document.querySelector("#text-edit");r&&r.remove();var o=(t.clipboardData||window.clipboardData).getData("text");n(V({x:0,y:0,text:o,editable:!1,draggable:!0})),t.preventDefault()}},et=function(){return function(t){var e=t.state;C.back(e)}},nt=function(){return function(t){var e=t.state;C.forward(e)}},rt=function(t){return function(e){var n,r,o=e.state;null===(n=(0,g.query)(o.tool.name))||void 0===n||n.classList.remove("tool--active"),null===(r=(0,g.query)(t.name))||void 0===r||r.classList.add("tool--active"),o.tool=Object.assign({},t),o.context.canvas.style.cursor=t.cursor||"default"}},ot=function(){return function(t){var e=t.state,n=t.canvas;(0,g.html)("input",{type:"file",accept:".txt",onchange:function(t){var r;e.canvas={},e.history.updated=!0,(r=t.target.files[0],new Promise((function(t){var e=new FileReader;e.addEventListener("load",(function(){return t(e.result)})),e.readAsText(r)}))).then((function(t){return t.split("\n").forEach((function(t,e){return t.split("").forEach((function(t,r){t.trim()&&n.set(r,e,t)}))}))}))}}).click()}},it=function(t){var e=t.width,n=t.height;return function(t){var r=t.state,o=t.put;r.width=e*r.cellWidth+1,r.height=n*r.cellHeight+1,r.canvas={},r.dirtyCells=[],r.history.updated=!0;var i=(0,m.initCanvas)({state:r,put:o});document.querySelector("canvas").replaceWith(i),(0,m.drawGrid)(r)}},at=function(){return function(t){var e=t.state,n=(0,m.measureText)(e.fontSize),r=n.width,o=n.height;e.cellWidth=r,e.cellHeight=o,(0,m.drawGrid)(e)}},ut=function(t){return function(e){var n=e.state,r=e.put;n.fontSize=t,n.history.updated=!0,r(at())}},ct={name:"text",icon:e($),behavior:"press",cursor:"text",onPointerUp:function(t){var e=t.x,n=t.y,r=t.put,o=document.querySelector("#text-edit");if(o)return o.remove();r(V({x:e,y:n,editable:!0,draggable:!1}))},onPointerDown:function(){},onPaint:function(){}};Q=i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("jC7mt");var st,lt={name:"selection",icon:e(Q),behavior:"drag",cursor:"crosshair",onPointerDown:function(t){var e=t.x,n=t.y;this.first={x:e,y:n}},onPointerUp:function(t){var e,n=t.canvas,r=t.put,o=this.first,i=this.last;if(o&&i){for(var a,u,c="",s=(u=i,[{x:(a=o).x,y:u.y},{x:u.x,y:a.y},a,u].sort((function(t,e){return t.x-e.x+t.y-e.y}))),l=s[0],f=s[3],d=l.y;d<f.y;d++){for(var h=l.x;h<f.x;h++){c+=(null===(e=n.get(h,d))||void 0===e?void 0:e.value)||" ",n.set(h,d,"")}c+="\n"}r(V({x:l.x,y:l.y,text:c,draggable:!0,editable:!1})),n.clearSelection(),this.first=void 0,this.last=void 0}},onPaint:function(t){var e=t.x,n=t.y,r=t.canvas;if(this.last={x:e,y:n},this.first){var o=this.first,i=this.last;r.drawSelection(o,i)}}};st=i("7MNIy").getBundleURL("ahxzu")+i("kyEFX").resolve("6tHdr");var ft=Math.sqrt,dt=Math.PI,ht=Math.round,vt=Math.min,pt=Math.abs,yt=Math.cos,mt=Math.sin,gt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r},xt=[h,I,q,ct,X,K.Rectangle,{name:"ellipse",icon:e(st),behavior:"drag",cursor:"crosshair",onPointerDown:function(t){var e=t.x,n=t.y,r=t.canvas;this.start={x:e,y:n},r.setPreview(e,n)},onPointerUp:function(t){t.canvas.applyPreview()},onPaint:function(t){var e=t.x,n=t.y,r=t.canvas;if(this.start){var o=e,i=n;r.clearPreview();for(var a=this.start.x-o,u=this.start.y-i,c=ft(a*a+u*u)/2,s=2*dt/ht(10*c),l=c,f=vt(1,pt(u/a)),d=vt(1,pt(a/u)),h=this.start.x-a/2,v=this.start.y-u/2,p=0;p<2*dt;p+=s){var y=h+d*l*yt(p),m=v-f*l*mt(p);r.setPreview(ht(y),ht(m))}}}},lt],bt=function(t){var e=t.state,n=t.put;return(0,g.html)("section",{className:"toolbar"},gt(xt.map((function(t){return(0,g.html)("button",{className:"tool js-"+t.name,onclick:function(e){return n(rt(t))}},[(0,g.html)("img",{src:t.icon,style:{pointerEvents:"none"}})])})),[(0,g.html)("footer",{className:"toolbar-options"},[(0,g.isMobile)()?"":(0,g.html)("input",{className:"size-handle",value:"1",type:"range",max:"10",min:"1",step:"1",onchange:function(t){return e.size=+t.target.value}})])]))},wt={};t(wt,"renderMenus",(function(){return Lt}),(function(t){return Lt=t}));var Et=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r},kt=navigator.platform.toUpperCase().indexOf("MAC")>=0?"⌘":"Ctrl",Pt=(0,g.htmlRaw)('\n<svg width="10" height="11" viewBox="0 0 10 11" style="display:inline-block;vertical-align:middle">\n  <path d="M7.5 4.33L0 8.66L0 0z"></path>\n</svg>\n'),Ct=function(t){return(0,g.html)("ul",{className:"menu-list"},Et(t.map((function(t){var e,n;return(0,g.html)("li",{className:"menu-item menu-container",onclick:t.onClick},[(0,g.html)("span",{},[t.text]),(0,g.html)("kbd",{className:"menu-item__shortcut"},[t.shortcut||"",(null===(e=t.items)||void 0===e?void 0:e.length)?Pt:""]),(null===(n=t.items)||void 0===n?void 0:n.length)?Ct(t.items):""])}))))},Nt=function(t){var e=t.text,n=t.items;return(0,g.html)("button",{className:"menu-button menu-container"},[e,Ct(void 0===n?[]:n)])},Lt=function(t){var e=t.state,n=t.put;return(0,g.html)("header",{className:"menu"},[Nt({text:"file",items:[{text:"New",shortcut:kt+"+n",onClick:function(){return function(t){var e,n,r=t.put,o=(0,g.html)("div",{className:"box dialog"},[(0,g.html)("form",{onsubmit:function(t){t.preventDefault(),r(it({width:e,height:n})),document.body.removeChild(o)}},[(0,g.html)("div",{className:"dialog__content"},[(0,g.html)("label",{className:"field"},["Row size",(0,g.html)("input",{className:"input",onchange:function(t){return e=+t.target.value}})]),(0,g.html)("label",{className:"field"},["Column size",(0,g.html)("input",{className:"input",onchange:function(t){return n=+t.target.value}})])]),(0,g.html)("button",{className:"button",type:"submit"},["start"])])]);document.body.appendChild(o)}({state:e,put:n})}},{text:"Open",onClick:function(){return n(ot())}},{text:"Share",onClick:function(){return n((function(t){var e=t.state;navigator.share&&navigator.share({title:"My art on asciicanvas.app",text:"",url:e.context.canvas.toDataURL("image/png")})}))}},{text:"Copy to clipboard",onClick:function(){return n((function(t){var e=t.state,n=(0,g.html)("textarea",{value:p(e),style:{top:"0",left:"0",position:"fixed"}});document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch(t){}document.body.removeChild(n)}))}},{text:"Export file",items:[{text:"Text (.txt)",onClick:function(){return n(Z("text"))}},{text:"Image (.png)",onClick:function(){return n(Z("img"))}}]}]}),Nt({text:"edit",items:[{text:"Undo",shortcut:kt+"+z",onClick:function(){return history.back()}},{text:"Redo",shortcut:kt+"+Shift+z",onClick:function(){return history.forward()}},{text:"Paste",shortcut:kt+"+v",onClick:function(){e.canvas={},e.history.updated=!0}},{text:"Clear",onClick:function(){e.canvas={},e.history.updated=!0}}]}),(0,g.html)("div",{className:"menu-options"},[(0,g.html)("input",{className:"menu-button char-input",style:{width:"40px"},type:"number",value:"14",onchange:function(t){var e=+t.target.value;n(ut(e))}}),(0,g.html)("button",{className:"menu-button menu-container char-input-container"},[(0,g.html)("input",{className:"menu-button char-input js-font-size-input",maxLength:1,value:"$",onchange:function(t){return e.char=t.target.value}}),(0,g.html)("ul",{className:"menu-list"},Et(["@","K","O","(",":","'",".","_"].map((function(t){return function(t,e){return(0,g.html)("li",{className:"menu-item char-input__option",onclick:function(){e.char=t,(0,g.query)("font-size-input").value=t,document.body.click()}},[(0,g.html)("span",{},[t])])}(t,e)}))))]),(0,g.html)("input",{className:"menu-button color-picker",type:"color",value:"#d238a8",onchange:function(t){return e.color=t.target.value}})])])},Ht=[{shift:!1,key:"z",effect:et},{shift:!0,key:"z",effect:nt}],Mt=function(t){var e=t.put;document.addEventListener("keydown",(function(t){var n=Ht.find((function(e){return e.key===t.key&&(t.ctrlKey||t.metaKey)&&e.shift===t.shiftKey}));n&&(t.preventDefault(),e(n.effect()))})),document.addEventListener("paste",(function(t){e(tt(t))}))};document.addEventListener("DOMContentLoaded",(function(){var t=y,e=function(n){"ready"===t.state&&n({state:t,canvas:(0,m.makeApi)(t),put:e})},n=(0,m.initCanvas)({state:t,put:e});if("ready"===t.state){document.body.appendChild((0,g.html)("main",{},[(0,wt.renderMenus)({state:t,put:e}),(0,g.html)("div",{className:"content"},[(0,A.renderToolbar)({state:t,put:e}),(0,g.html)("div",{className:"canvas-container"},[n]),(0,g.isMobile)()?(0,g.html)("div",{className:"size-handle-wrapper"},[(0,g.html)("input",{className:"size-handle",value:"1",type:"range",max:"10",min:"1",step:"1",onchange:function(e){return t.size=+e.target.value}})]):""])]));var r=function(){"ready"===t.state&&((0,m.draw)(t),requestAnimationFrame(r))};Mt({put:e}),e(at()),e(rt(h)),(0,m.drawGrid)(t),r()}}));
//# sourceMappingURL=index.38da8cff.js.map
