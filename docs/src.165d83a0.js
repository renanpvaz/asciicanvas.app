parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"frbt":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArrays||function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var a=arguments[r],i=0,l=a.length;i<l;i++,o++)n[o]=a[i];return n};Object.defineProperty(exports,"__esModule",{value:!0});var r=function(e,r){var t=document.createElement("canvas"),n=t.getContext("2d"),o=window.devicePixelRatio||1;return t.width=e*o,t.height=r*o,t.style.width=e+"px",t.style.height=r+"px",n.scale(o,o),t},t=function(){var e=r(600,400);return e.getContext("2d").font="14px monospace",e};exports.initCanvas=t,exports.measureText=function(e){var r=document.createElement("canvas").getContext("2d");r.font=e+"px monospace";var t=r.measureText("$");return{width:t.width,height:1.5*t.actualBoundingBoxAscent}},exports.neighbors=function(e,r){var t=e.x,n=e.y;return[{x:t+1,y:n},{x:t-1,y:n},{x:t,y:n+1},{x:t,y:n-1}]},exports.getNNeighbors=function(r,t,n){if(1===r)return[t];if(2===r)return e([t],exports.neighbors(t,n));for(var o=[],a=Math.sin,i=Math.acos,l=t.x-r;l<t.x+r;l++)for(var c=r*a(i((t.x-l)/r))*.5,v=t.y-c;v<t.y+c;v++)o.push({x:l,y:Math.round(v)});return o};var n=function(e,r){var t=e.x,n=e.y;return t>600/r.cellWidth||t<0||n>window.innerHeight/r.cellHeight||n<0},o=function(e,r){return e+","+r};exports.key=o;var a=function(e){var r=function(r,t){return n({x:r,y:t,value:null,color:null},e)?void 0:function(r,t){return e.canvas[o(r,t)]||{x:r,y:t}}(r,t)},t=function(t,n,a){void 0===a&&(a=e.char);var i=r(t,n);if(!(i&&i.value===a&&i.color===e.color)){var l=o(t,n);e.canvas[l]={value:a,color:e.color,x:t,y:n},e.dirtyCells.push(l)}};return{get:r,set:t,setPreview:function(r,t,a){void 0===a&&(a=e.char);var i=o(r,t);n({x:r,y:t},e)||(e.preview[i]={value:a,color:e.color,x:r,y:t})},clearPreview:function(){var t=e.preview;for(var n in t){var o=r(t[n].x,t[n].y);t[n]=o}},applyPreview:function(){var r=e.preview;for(var t in r){var n=r[t];n.value&&(e.canvas[t]=n)}e.preview={}},setAll:function(e,r){return e.forEach(function(e){return t(e.x,e.y,r)})}}};exports.makeApi=a;var i=function(e,t){var n=r(600,400),o=n.getContext("2d");o.strokeStyle="#7b7b7b",o.lineWidth=.5;for(var a=0;a<600;a+=e.cellWidth)o.beginPath(),o.moveTo(a,0),o.lineTo(a,400),o.stroke();for(var i=0;i<400;i+=e.cellHeight)o.beginPath(),o.moveTo(0,i),o.lineTo(600,i),o.stroke();t.canvas.style.backgroundImage="url('"+n.toDataURL()+"')"};exports.drawGrid=i;var l=function(e,r){r.textBaseline="top",r.font=e.fontSize+"px monospace";var t=function(t){t.value&&(r.fillStyle=t.color,r.fillText(t.value,t.x*e.cellWidth,t.y*e.cellHeight))},n=function(t){t&&r.clearRect(t.x*e.cellWidth,t.y*e.cellHeight,e.cellWidth,e.cellHeight)};if(e.history.updated)for(var o in r.clearRect(0,0,r.canvas.width,r.canvas.height),e.canvas){t(c=e.canvas[o])}else{for(var a in e.preview){n(c=e.preview[a]),t(c)}for(var i=0,l=e.dirtyCells;i<l.length;i++){var c,v=l[i];n(c=e.canvas[v]),t(c)}e.dirtyCells=[]}};exports.draw=l;
},{}],"jNSW":[function(require,module,exports) {
"use strict";var e=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,r,n){var o,a=document.createElement(t),i=r.style,l=void 0===i?{}:i,s=e(r,["style"]);return Object.assign(a.style,l),Object.assign(a,s),null===(o=n)||void 0===o||o.forEach(function(e){return a.appendChild("string"==typeof e?document.createTextNode(e):e)}),a};exports.html=t;var r=function(e){return t("div",{innerHTML:e}).firstElementChild};exports.htmlRaw=r;var n=function(e){var t=r(e),n=(new XMLSerializer).serializeToString(t);return"url('data:image/svg+xml;base64,"+btoa(n)+"'), auto"};exports.makeCursorFromSvg=n;
},{}],"CaSH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Canvas"),n=require("../util"),t='\n  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="18" height="18" x="0px" y="0px" viewBox="0 0 383.947 383.947" style="enable-background:new 0 0 383.947 383.947;">\n      <polygon points="0,303.947 0,383.947 80,383.947 316.053,147.893 236.053,67.893 \t\t\t"/>\n      <path d="M377.707,56.053L327.893,6.24c-8.32-8.32-21.867-8.32-30.187,0l-39.04,39.04l80,80l39.04-39.04\n        C386.027,77.92,386.027,64.373,377.707,56.053z"/>\n  </svg>\n';exports.Pencil={name:"pencil",icon:t,sizeable:!0,cursor:n.makeCursorFromSvg(t),onPaint:function(n){var t=n.x,s=n.y,r=n.canvas,i=n.state;r.setAll(e.getNNeighbors(i.size||0,{x:t,y:s},i))}};
},{"../Canvas":"frbt","../util":"jNSW"}],"G5mf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Tool/Pencil");exports.getRealCoords=function(e,l,o){return{x:Math.floor(e/o.cellWidth),y:Math.floor(l/o.cellHeight)}},exports.initialState={pressing:!1,canvas:{},preview:{},cellHeight:0,cellWidth:0,char:"$",color:"#d238a8",selectedTool:"pencil",dirtyCells:[],history:{undo:[],redo:[],updated:!1},keys:{},tool:e.Pencil,$toolRef:null,size:1,fontSize:14};
},{"./Tool/Pencil":"CaSH"}],"Z9SI":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var t,n=1,o=arguments.length;n<o;n++)for(var e in t=arguments[n])Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){var n=function(r){var n=t.history[r];if(n.length){o("undo"===r?"redo":"undo");var e=n.pop();t.canvas=e||{},t.history.updated=!0}},o=function(n){t.history[n].push(r({},t.canvas)),t.history.updated=!1};return{track:function(){t.history.redo=[],o("undo")},back:function(){return n("undo")},forward:function(){return n("redo")}}};exports.history=t;
},{}],"eRuT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(n,e){for(var r=e.x-n.x,t=e.y-n.y,a=Math.abs(r),o=Math.abs(t),s=r>0?1:-1,x=t>0?1:-1,i={x:n.x,y:n.y},y=[{x:i.x,y:i.y}],v=0,c=0;v<a||c<o;)(.5+v)/a<(.5+c)/o?(i.x+=s,v+=1):(i.y+=x,c+=1),y.push({x:i.x,y:i.y});return y},e='\n  <svg x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;">\n    <path d="M349.091,0v124.516L124.516,349.091H0V512h162.909V387.484l224.574-224.574H512V0H349.091z M54.303,457.696v-54.303\n      h54.303v54.303H54.303z M457.696,108.605h-54.303V54.303h54.303V108.605z"/>\n  </svg>\n';exports.Line={name:"line",icon:e,state:{},cursor:"crosshair",onPointerDown:function(n,e){var r=n.x,t=n.y;e.start={x:r,y:t}},onPointerUp:function(n){n.canvas.applyPreview()},onPaint:function(e,r){var t=e.x,a=e.y,o=e.canvas,s=r.start,x={x:t,y:a};s&&(o.clearPreview(),n(s,x).forEach(function(n){return o.setPreview(n.x,n.y)}))}};
},{}],"nkuq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Canvas"),n='\n  <svg enable-background="new 0 0 467.765 467.765" viewBox="0 0 467.765 467.765">\n    <path d="m459.2 198.594-160.795-160.794c-11.42-11.42-29.921-11.42-41.34 0l-248.5 248.5c-11.42 11.42-11.42 29.921 0 41.34l102.324 102.324c5.482 5.482 12.919 8.565 20.67 8.565h116.941c7.751 0 15.189-3.083 20.67-8.565l190.03-190.029c11.42-11.42 11.42-29.921 0-41.341zm-222.805 181.465h-92.731l-73.088-73.088 82.91-82.91 119.454 119.454z"/>\n  </svg>\n';exports.Eraser={name:"eraser",icon:n,onPaint:function(n){var r=n.x,a=n.y,s=n.canvas,t=n.state;return s.setAll(e.getNNeighbors(t.size||0,{x:r,y:a},t),"")}};
},{"../Canvas":"frbt"}],"yoTF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util"),t='\n  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="18" height="18" enable-background="new 0 0 467.766 467.766" height="512" viewBox="0 0 467.766 467.766">\n    <path d="m169.359 371.494c5.71 5.71 13.19 8.565 20.67 8.565s14.96-2.855 20.67-8.565l181.464-181.464-190.028-190.03-41.34 41.34 31.748 31.748-140.125 140.124c-11.42 11.42-11.42 29.921 0 41.34 0 .001 116.941 116.942 116.941 116.942zm64.524-257.065 75.601 75.601-43.853 43.853h-151.202c0-.001 119.454-119.454 119.454-119.454z"/><path d="m394.677 380.06c24.219 0 43.853-19.634 43.853-43.853s-43.853-73.088-43.853-73.088-43.853 48.869-43.853 73.088 19.634 43.853 43.853 43.853z"/>\n    <path d="m29.236 409.295h409.294v58.471h-409.294z"/>\n  </svg>\n';exports.Fill={name:"fill",icon:t,cursor:e.makeCursorFromSvg(t),onPaint:function(e){var t=e.x,n=e.y,r=e.state,i=e.canvas,o=i.get(t,n);o&&function e(t,n,o){var s=i.get(n,o);if(s&&s.color===t){i.set(n,o);var a=function(){e(t,n+1,o),e(t,n-1,o),e(t,n,o+1),e(t,n,o-1)};r.dirtyCells.length>1e3?requestAnimationFrame(a):a()}}(o.color,t,n)}};
},{"../util":"jNSW"}],"NCY5":[function(require,module,exports) {
"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(n){for(var r,e=1,t=arguments.length;e<t;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a]);return n}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var r=function(r,e){var t=[r,e],a=function(a,s){for(var o,v,i=!1,c=r[a]<e[a]?1:-1,u=r[s]<e[s]?-1:1,h=r,p=e;!i;){var y=h[a]===p[a],x=h[s]===p[s];y||t.push(h=n(n({},h),((o={})[a]=h[a]+c,o))),x||t.push(p=n(n({},p),((v={})[s]=p[s]+u,v))),i=y&&x}};return a("x","y"),a("y","x"),t},e='\n  <svg x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;">\n    <path d="M466.052,374.155V45.948H137.847V0H0v137.847h45.948v328.205h328.205V512H512V374.155H466.052z M91.897,91.897H45.948\n      V45.948h45.948V91.897z M420.103,374.153h-45.948v0.001v45.948H91.898V137.847h45.948v-45.95h282.256V374.153z M466.052,466.052\n      h-45.948v-45.948h45.948V466.052z"/>\n  </svg>\n';exports.Square={name:"square",icon:e,state:{},cursor:"crosshair",onPointerDown:function(n,r){var e=n.x,t=n.y,a=n.canvas;r.start={x:e,y:t},a.setPreview(e,t)},onPointerUp:function(n){n.canvas.applyPreview()},onPaint:function(n,e){var t=n.x,a=n.y,s=n.canvas,o={x:t,y:a};s.clearPreview();for(var v=0,i=r(e.start,o);v<i.length;v++){var c=i[v];s.setPreview(c.x,c.y)}}};
},{}],"KTKU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util"),t='\n  <svg x="0px" y="0px" width="18" height="20">\n     <text x="50%" y="70%" dominant-baseline="middle" text-anchor="middle" font-size="20" font-family="serif">T</text>\n  </svg>\n';exports.Text={name:"text",icon:t,cursor:"text",state:{active:!1},onPointerUp:function(t,n){var i=t.x,o=t.y,r=t.state,d=t.canvas,a=document.querySelector("#text-edit");if(a)return a.remove();var l=e.html("p",{id:"text-edit",contentEditable:"true",style:{position:"absolute",top:o*r.cellHeight+32+"px",left:i*r.cellWidth+31+"px",fontSize:r.fontSize+"px",fontFamily:"monospace",zIndex:"1",padding:"0",background:"white",border:"0",margin:"0",lineHeight:"1",outline:"2px dashed #03A9F4"},textContent:"",onkeyup:function(e){var t;"Enter"!==e.key||e.shiftKey||(e.preventDefault(),document.body.removeChild(l),n.active=!1,null===(t=l.textContent)||void 0===t||t.split("").forEach(function(e,t){d.set(i+t-1,o,e)}))}});document.body.appendChild(l),l.focus()}};
},{"../util":"jNSW"}],"ahDH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var c='\n  <svg viewBox="0 0 512 512">\n    <path d="m497 211h-20.535156c-17.949219-87.78125-87.683594-157.515625-175.464844-175.464844v-20.535156c0-8.285156-6.714844-15-15-15h-60c-8.285156 0-15 6.714844-15 15v20.53125c-42.101562 8.5625-80.519531 28.902344-111.761719 59.296875-32.746093 31.863281-54.675781 71.917969-63.691406 116.171875h-20.546875c-8.285156 0-15 6.714844-15 15v60c0 8.285156 6.714844 15 15 15h20.546875c17.996094 88.160156 87.332031 157.46875 175.453125 175.453125v20.546875c0 8.285156 6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15v-20.535156c44.261719-9.027344 84.351562-30.996094 116.175781-63.710938 30.355469-31.203125 50.707031-69.652344 59.28125-111.753906h20.542969c8.285156 0 15-6.714844 15-15v-60c0-8.285156-6.714844-15-15-15zm-256-181h30v30h-30zm-211 211h30v30h-30zm241 241h-30v-30h30zm30-36.261719v-8.738281c0-8.285156-6.714844-15-15-15h-60c-8.285156 0-15 6.714844-15 15v8.742188c-71.523438-16.96875-127.769531-73.191407-144.746094-144.742188h8.746094c8.285156 0 15-6.714844 15-15v-60c0-8.285156-6.714844-15-15-15h-8.734375c16.984375-70.964844 74.015625-127.734375 144.734375-144.714844v8.714844c0 8.285156 6.714844 15 15 15h60c8.285156 0 15-6.714844 15-15v-8.734375c71.25 16.960937 127.773438 73.484375 144.734375 144.734375h-8.734375c-8.285156 0-15 6.714844-15 15v60c0 8.285156 6.714844 15 15 15h8.75c-16.925781 71.464844-72.964844 127.722656-144.75 144.738281zm181-174.738281h-30v-30h30zm0 0"/>\n  </svg>\n';exports.Ellipse={name:"ellipse",icon:c,state:{},cursor:"crosshair",onPointerDown:function(c,a){var h=c.x,t=c.y,v=c.canvas;a.start={x:h,y:t},v.setPreview(h,t)},onPointerUp:function(c){c.canvas.applyPreview()},onPaint:function(c,a){var h=c.x,t=c.y,v=c.canvas,e=a.start;if(e){var n=h,r=t;v.clearPreview();for(var s=e.x-n,o=e.y-r,i=Math.sqrt(s*s+o*o)/2,M=2*Math.PI/Math.round(10*i),m=i,u=Math.min(1,Math.abs(o/s)),P=Math.min(1,Math.abs(s/o)),p=e.x-s/2,l=e.y-o/2,x=0;x<2*Math.PI;x+=M){var y=p+P*m*Math.cos(x),d=l-u*m*Math.sin(x);v.setPreview(Math.round(y),Math.round(d))}}}};
},{}],"Aip1":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArrays||function(){for(var e=0,r=0,o=arguments.length;r<o;r++)e+=arguments[r].length;var t=Array(e),l=0;for(r=0;r<o;r++)for(var a=arguments[r],i=0,n=a.length;i<n;i++,l++)t[l]=a[i];return t};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./util"),o=require("./Tool/Pencil"),t=require("./Tool/Line"),l=require("./Tool/Eraser"),a=require("./Tool/Fill"),i=require("./Tool/Square"),n=require("./Tool/Text"),s=require("./Tool/Ellipse"),u=[o.Pencil,t.Line,l.Eraser,a.Fill,i.Square,s.Ellipse,n.Text],c=function(o,t){return r.html("section",{className:"toolbar"},e(u.map(function(e){return r.html("button",{className:"tool",innerHTML:e.icon,onclick:function(r){var l,a=r.target;null===(l=o.$toolRef)||void 0===l||l.classList.toggle("tool--active"),a.classList.toggle("tool--active"),o.tool=e,o.$toolRef=a,t.canvas.style.cursor=e.cursor||"default"}})}),[r.html("footer",{className:"toolbar-options"},[r.html("input",{className:"size-handle",value:"1",type:"range",max:"10",min:"1",step:"1",onchange:function(e){return o.size=+e.target.value}})])]))};exports.renderToolbar=c;
},{"./util":"jNSW","./Tool/Pencil":"CaSH","./Tool/Line":"eRuT","./Tool/Eraser":"nkuq","./Tool/Fill":"yoTF","./Tool/Square":"NCY5","./Tool/Text":"KTKU","./Tool/Ellipse":"ahDH"}],"Tg4V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util"),t=require("./Canvas"),n=function(){var e=document.createElement("a");e.setAttribute("href",document.querySelector("canvas").toDataURL("image/png")),e.setAttribute("download","untitled.png"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},l=function(e){for(var n,l="",a=0;a<400;a++){for(var m=0;m<600;m++){l+=(null===(n=e.canvas[t.key(m,a)])||void 0===n?void 0:n.value)||" "}l+="\n"}console.log(l);var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),i.setAttribute("download","untitled.txt"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},a=function(a,m,i){return e.html("header",{className:"menu"},[e.html("button",{className:"menu-button menu-container"},["file",e.html("ul",{className:"menu-list"},[e.html("li",{className:"menu-item"},[e.html("span",{},["New"]),e.html("small",{},["Cmd+Z"])]),e.html("li",{className:"menu-item menu-container"},[e.html("span",{},["Export"]),e.html("small",{},[e.htmlRaw('\n              <svg width="10" height="11" viewBox="0 0 10 11" style="fill:white;display:inline-block;vertical-align:middle">\n                <path d="M7.5 4.33L0 8.66L0 0z"></path>\n              </svg>\n            ')]),e.html("ul",{className:"menu-list menu-list--right"},[e.html("li",{className:"menu-item"},[e.html("span",{onclick:function(){return l(a)}},["Text (.txt)"])]),e.html("li",{className:"menu-item"},[e.html("span",{onclick:n},["Image (.png)"])])])])])]),e.html("button",{className:"menu-button menu-container"},["edit",e.html("ul",{className:"menu-list"},[e.html("li",{className:"menu-item",onclick:function(){return i.back()}},[e.html("span",{},["Undo"]),e.html("small",{},["Cmd+Z"])]),e.html("li",{className:"menu-item",onclick:function(){return i.forward()}},[e.html("span",{},["Redo"]),e.html("small",{},["Cmd+Shift+Z"])])])]),e.html("input",{className:"menu-button char-input",value:"14",onchange:function(e){var n=+e.target.value,l=t.measureText(n),i=l.width,u=l.height;a.fontSize=n,a.cellWidth=i,a.cellHeight=u,a.history.updated=!0,t.drawGrid(a,m)}}),e.html("input",{className:"menu-button char-input",maxLength:1,value:"$",onchange:function(e){return a.char=e.target.value}}),e.html("input",{className:"menu-button color-picker",type:"color",value:"#d238a8",onchange:function(e){return a.color=e.target.value}})])};exports.renderMenus=a;
},{"./util":"jNSW","./Canvas":"frbt"}],"B6dB":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./State"),n=require("./Canvas"),r=require("./History"),i=require("./Toolbar"),o=require("./Menu"),a=require("./util"),s=e({},t.initialState),u=n.initCanvas(),d=u.getContext("2d"),c=!1,l=function(r,i){var o=s.tool[r];o&&o(e(e({},t.getRealCoords(i.x-32,i.y-32,s)),{state:s,canvas:n.makeApi(s)}),s.tool.state)},v=function(){document.body.appendChild(a.html("main",{},[o.renderMenus(s,d,r.history(s)),a.html("div",{className:"content"},[i.renderToolbar(s,d),a.html("div",{className:"canvas-container"},[u])])])),document.querySelector(".tool").click(),u.addEventListener("mousedown",function(e){s.pressing=!0,l("onPointerDown",e),r.history(s).track()}),u.addEventListener("mouseup",function(e){s.pressing=!1,l("onPointerUp",e),l("onPaint",e)}),u.addEventListener("mousemove",function(e){s.pressing&&l("onPaint",e)}),document.addEventListener("keydown",function(e){s.keys[e.key]=!0}),document.addEventListener("keyup",function(e){s.keys[e.key]=!1});var e=n.measureText(14),t=e.width,c=e.height;s.cellWidth=t,s.cellHeight=c,n.drawGrid(s,d),h()},f=[["Meta+Shift+z",function(){return r.history(s).forward()}],["Meta+z",function(){return r.history(s).back()}]],y=["Shift","Meta","Ctrl"],h=function t(){var r=f.find(function(e){return e[0].split("+").every(function(e){return s.keys[e]})});r&&(r[1](),s.keys=y.reduce(function(t,n){var r;return e(e({},t),((r={})[n]=s.keys[n],r))},{})),n.draw(s,d),c||requestAnimationFrame(t)};document.addEventListener("DOMContentLoaded",v);
},{"./State":"G5mf","./Canvas":"frbt","./History":"Z9SI","./Toolbar":"Aip1","./Menu":"Tg4V","./util":"jNSW"}]},{},["B6dB"], null)
//# sourceMappingURL=/src.165d83a0.js.map